"use strict";
require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","common","star"],function(t,e,i,o,r,a){function s(){t(".loading-mask").addClass("hide"),t(".main-wrap").removeClass("invisibility"),t("footer").removeClass("invisibility")}console.log("comment_detail.js"),r.initLoginStatus();var l=r.util.getQueryString("cmId");!function(e){r.dao.getCommentDetail({cmId:e},function(e){if(e&&e.length>0){for(var i=0;i<e.length;i++){var o=e[i];o.productImg=r.util.picUrl+o.productImg;for(var a=0;a<o.shareimgs.length;a++)o.shareimgs[a]=r.util.commentPicUrl+o.shareimgs[a];if(o.crtime=r.util.formatOrderDateTime(o.crtime),sessionStorage.userInfo){var s=JSON.parse(sessionStorage.userInfo);o.userSubmiter=s.email}else o.userSubmiter=""}var l=r.util.getAdvSource().u;l||(l=r.util.getQueryString("u"));var n="";l&&(n="?u="+l);var m=r.util.encodeMenuType(r.util.getUvid()),d=[{commentList:e,attrDes:e[0].attrDes,colorDes:e[0].colorDes,productImg:e[0].productImg,productName:e[0].productName,href:r.util.formatProductName(e[0].productName)+"-d-"+r.util.encodeMenuType(e[0].productId)+"-"+r.util.encodeMenuType(e[0].productColorId)+"-"+m+".html"+n}];t("#comment_list").html(t("#commentTempl").tmpl(d)),t("#comment_list #color_title").html(t.i18n.map.ColorTitle),t("#comment_list .reply-text").html(t.i18n.map.DetailCommentReply),t("#comment_list .comment-info-wrap input").each(function(){t(this).rating({step:1,size:"xs",showClear:!1,min:0,max:5,disabled:!0,showCaption:!1}).rating("showStars",t(this).data().data)}),t("#comment_list .image-wrap img").each(function(){t(this).click(function(){t(this).parent().find("img").removeClass("selected"),t(this).addClass("selected");var e=t(this).data().data,i=t(this).parent().parent().find(".big-image-wrap");if(0==i.find(".owl-item").length){for(var o=i.data().data,r=o.split(","),a=[],s=0;s<r.length;s++){var l=r[s];a.push(l)}t("#commentBigImageTempl").tmpl(a).appendTo(i[0]),i.owlCarousel({nav:!0,loop:!1,slideBy:"1",autoPlay:!1,rewind:!1,smartSpeed:70,items:1,dots:!1,startPosition:e,navText:['<svg viewBox="0 0 24 24" style="width:40px;height:40px;background: rgba(0,0,0,0.3);border-radius: 50%;"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" style="fill: #f1f1f1;"></path></svg>','<svg viewBox="0 0 24 24" style="width:40px;height:40px;background: rgba(0,0,0,0.3);border-radius: 50%;"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" style="fill: #f1f1f1;"></path></svg>']}),i.removeClass("hide"),i.find(".owl-item img").click(function(){i.addClass("hide")})}else i.trigger("to.owl.carousel",[e]),i.removeClass("hide")})})}},null,function(){s()})}(l)});