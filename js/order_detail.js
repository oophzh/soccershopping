"use strict";
require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","common"],function(e,t,r,i,a){function s(t){t&&t.usrico?a.util.setUserImage(e("#sex_image"),t.usrico):"0"==t.sex?e("#sex_image").attr("src","resources/img/user/user-female.png"):"1"==t.sex&&e("#sex_image").attr("src","resources/img/user/user-female.png")}function l(t){var r=[],i={};i.label=e.i18n.map.OrderNumber+":",i.value=t.orderId,r.push(i),i={},i.label=e.i18n.map.OrderDate+":",i.value=a.util.formatOrderDateTime(t.crTime),r.push(i),t.shippingAddr&&(i={},i.label=e.i18n.map.ShippedTo+":",i.value=t.shippingAddr.recFirstname+" "+t.shippingAddr.recLastname+"("+t.shippingAddr.streetAddr+" "+t.shippingAddr.extendAddr+" "+t.shippingAddr.city+","+t.shippingAddr.province+" "+t.shippingAddr.postCode+","+t.shippingAddr.fullCountry+")",r.push(i),i={},i.label="",i.value=e.i18n.map.PhoneNumberlabel+": "+t.shippingAddr.telephone,r.push(i)),t.billAddr&&(i={},i.label=e.i18n.map.BilledTo+":",i.value=t.billAddr.recFirstname+" "+t.billAddr.recLastname+"("+t.billAddr.streetAddr+" "+t.billAddr.extendAddr+" "+t.billAddr.city+","+t.billAddr.province+" "+t.billAddr.postCode+","+t.billAddr.fullCountry+")",r.push(i),i={},i.label="",i.value=e.i18n.map.PhoneNumberlabel+": "+t.billAddr.telephone,r.push(i)),i={},i.label=e.i18n.map.OrderStatus+":",0==t.paymentStatus?t.paymentStatusString=e.i18n.map.OrderStatusPendding:1==t.paymentStatus?t.paymentStatusString=e.i18n.map.OrderStatusSuccess:2==t.paymentStatus?t.paymentStatusString=e.i18n.map.OrderStatusFail:3==t.paymentStatus?t.paymentStatusString=e.i18n.map.OrderStatusDelay:4==t.paymentStatus&&(t.paymentStatusString=e.i18n.map.OrderStatusDelivered),i.value=t.paymentStatusString,r.push(i),e("#order_info").html(e("#orderInfoTempl").tmpl(r))}a.initLoginStatus(function(t){if(t){if(sessionStorage.userInfo){var r=JSON.parse(sessionStorage.userInfo);r.firstName?e("#name").text(r.firstName+r.lastName):r.email&&e("#name").text(r.email),s(r)}sessionStorage.commentSwitch&&"1"==sessionStorage.commentSwitch?e("#menu_my_comment").removeClass("hide"):e("#menu_my_comment").addClass("hide"),sessionStorage.messageSwitch&&"1"==sessionStorage.messageSwitch?e("#menu_my_message").removeClass("hide"):e("#menu_my_message").addClass("hide")}else window.location.href="../../../login.html"});var n=a.util.getQueryString("id");!function(t){a.dao.getOrderDetail({orderId:t},function(t){var r=a.util.getCurrencySymbol(t.correncyCode);r||(r=a.util.getCurrencySymbol(a.util.getLocalCurrency()));var i=a.util.getAdvSource().u;i||(i=a.util.getQueryString("u"));var s="";i&&(s="?u="+i);for(var n=a.util.encodeMenuType(a.util.getUvid()),d=t.spCart,o=0;o<d.length;o++){var m=d[o];m.displayImg=a.util.picUrl+m.displayImg,m.productPrice=a.util.formatProductPrice(m.productPrice,r);var u=a.util.formatProductName(m.productName)+"-d-"+a.util.encodeMenuType(m.productId)+"-"+a.util.encodeMenuType(m.productColorId)+"-"+n+".html"+s;m.href=u}e("#cart_list").html(e("#cartTempl").tmpl(d)),e("#cart_list #color_title").html(e.i18n.map.ColorTitle),e("#cart_list #item").html(e.i18n.map.Item),e("#cart_list #qty").html(e.i18n.map.Qty),e("#cart_list #total").html(e.i18n.map.Total),l(t);var p=[];p.push({disCost:t.totalCost,disTitle:e.i18n.map.SubTotal,policyId:-1}),p=p.concat(t.orderDisInfos),p.push({disCost:t.realCost,disTitle:e.i18n.map.GrandTotal,policyId:-1});for(var o=0;o<p.length;o++){var c=p[o];c.disCost<0?c.disCost="-"+a.util.formatProductPrice(-c.disCost,r):c.disCost="+"+a.util.formatProductPrice(c.disCost,r)}e("#dis_info_list").html(e("#disInfoTempl").tmpl(p)),e("#sub_total").html(a.util.formatProductPrice(t.totalCost,r)),e("#grand_total").html(a.util.formatProductPrice(t.realCost,r))})}(n),function(){e(".menu-item-parent .menu-item-wrap").bind("click",function(){e(this).hasClass("selected")||(e(".menu-item-parent .menu-item-wrap").removeClass("selected"),e(this).addClass("selected"),e(".menu-content-wrap .title").text(e(this).text()))})}()});