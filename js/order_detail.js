"use strict";
require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","common"],function(t,e,r,i,a){function s(e){e&&e.usrico?a.util.setUserImage(t("#sex_image"),e.usrico):"0"==e.sex?t("#sex_image").attr("src","resources/img/user/user-female.png"):"1"==e.sex&&t("#sex_image").attr("src","resources/img/user/user-female.png")}function l(e){var r=[],i={};i.label=t.i18n.map.OrderNumber+":",i.value=e.orderId,r.push(i),i={},i.label=t.i18n.map.OrderDate+":",i.value=a.util.formatOrderDateTime(e.crTime),r.push(i),e.shippingAddr&&(i={},i.label=t.i18n.map.ShippedTo+":",i.value=e.shippingAddr.recFirstname+" "+e.shippingAddr.recLastname+"("+e.shippingAddr.streetAddr+" "+e.shippingAddr.extendAddr+" "+e.shippingAddr.city+","+e.shippingAddr.province+" "+e.shippingAddr.postCode+","+e.shippingAddr.fullCountry+")",r.push(i),i={},i.label="",i.value=t.i18n.map.PhoneNumberlabel+": "+e.shippingAddr.telephone,r.push(i)),e.billAddr&&(i={},i.label=t.i18n.map.BilledTo+":",i.value=e.billAddr.recFirstname+" "+e.billAddr.recLastname+"("+e.billAddr.streetAddr+" "+e.billAddr.extendAddr+" "+e.billAddr.city+","+e.billAddr.province+" "+e.billAddr.postCode+","+e.billAddr.fullCountry+")",r.push(i),i={},i.label="",i.value=t.i18n.map.PhoneNumberlabel+": "+e.billAddr.telephone,r.push(i)),i={},i.label=t.i18n.map.OrderStatus+":",0==e.paymentStatus?e.paymentStatusString=t.i18n.map.OrderStatusPendding:1==e.paymentStatus||10==e.paymentStatus?e.paymentStatusString=t.i18n.map.OrderStatusSuccess:2==e.paymentStatus?e.paymentStatusString=t.i18n.map.OrderStatusFail:3==e.paymentStatus?e.paymentStatusString=t.i18n.map.OrderStatusDelay:4==e.paymentStatus&&(e.paymentStatusString=t.i18n.map.OrderStatusDelivered),i.value=e.paymentStatusString,r.push(i),t("#order_info").html(t("#orderInfoTempl").tmpl(r))}a.initLoginStatus(function(e){if(e){if(sessionStorage.userInfo){var r=JSON.parse(sessionStorage.userInfo);r.firstName?t("#name").text(r.firstName+r.lastName):r.email&&t("#name").text(r.email),s(r)}sessionStorage.commentSwitch&&"1"==sessionStorage.commentSwitch?t("#menu_my_comment").removeClass("hide"):t("#menu_my_comment").addClass("hide"),sessionStorage.messageSwitch&&"1"==sessionStorage.messageSwitch?t("#menu_my_message").removeClass("hide"):t("#menu_my_message").addClass("hide")}else window.location.href="../../../login.html"});var n=a.util.getQueryString("id");!function(e){a.dao.getOrderDetail({orderId:e},function(e){var r=a.util.getCurrencySymbol(e.correncyCode);r||(r=a.util.getCurrencySymbol(a.util.getLocalCurrency()));var i=a.util.getAdvSource().u;i||(i=a.util.getQueryString("u"));var s="";i&&(s="?u="+i);for(var n=a.util.encodeMenuType(a.util.getUvid()),d=e.spCart,o=0;o<d.length;o++){var m=d[o];m.displayImg=a.util.picUrl+m.displayImg,m.productPrice=a.util.formatProductPrice(m.productPrice,r);var u=a.util.formatProductName(m.productName)+"-d-"+a.util.encodeMenuType(m.productId)+"-"+a.util.encodeMenuType(m.productColorId)+"-"+n+".html"+s;m.href=u}t("#cart_list").html(t("#cartTempl").tmpl(d)),t("#cart_list #color_title").html(t.i18n.map.ColorTitle),t("#cart_list #item").html(t.i18n.map.Item),t("#cart_list #qty").html(t.i18n.map.Qty),t("#cart_list #total").html(t.i18n.map.Total),l(e);var p=[];p.push({disCost:e.totalCost,disTitle:t.i18n.map.SubTotal,policyId:-1}),p=p.concat(e.orderDisInfos),p.push({disCost:e.realCost,disTitle:t.i18n.map.GrandTotal,policyId:-1});for(var o=0;o<p.length;o++){var c=p[o];c.disCost<0?c.disCost="-"+a.util.formatProductPrice(-c.disCost,r):c.disCost="+"+a.util.formatProductPrice(c.disCost,r)}t("#dis_info_list").html(t("#disInfoTempl").tmpl(p)),t("#sub_total").html(a.util.formatProductPrice(e.totalCost,r)),t("#grand_total").html(a.util.formatProductPrice(e.realCost,r))})}(n),function(){t(".menu-item-parent .menu-item-wrap").bind("click",function(){t(this).hasClass("selected")||(t(".menu-item-parent .menu-item-wrap").removeClass("selected"),t(this).addClass("selected"),t(".menu-content-wrap .title").text(t(this).text()))})}()});