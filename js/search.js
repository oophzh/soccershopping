"use strict";
require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","common","bootstrapPaginator"],function(t,e,r,a,i,o){function n(){}function u(e){i.dao.searchProducts({keyWord:e,currentPage:s.curPage,orderby:g,currencyId:i.util.getLocalCurrency()},function(e){if(e.page){s.amount=e.page.amount,s.pageSize=e.page.pageSize;var r=(s.curPage-1)*s.pageSize+1,a=s.curPage*s.pageSize;a>s.amount&&(a=s.amount),t("#current_product_number").html(r+"-"+a),t("#product_total_number").html(s.amount)}else t("#current_product_number").html("0-0"),t("#product_total_number").html(0);var i=e.products;i&&i.length>0?(c(i),l(i),1==s.curPage&&p(),t("#item_list").show(),t(".empty-data").hide()):(t("#item_list").hide(),t(".empty-data").show()),t(".sort-wrap").removeClass("invisibility")})}function c(e){var r=i.util.getCurrencySymbol(i.util.getLocalCurrency()),a=i.util.getAdvSource().u;a||(a=i.util.getQueryString("u"));var o=i.util.encodeMenuType(i.util.getUvid()),u="";a&&(u="?u="+a);for(var c=0;c<e.length;c++){for(var p=e[c],l=0;l<p.display_data.length;l++){var g=p.display_data[l];g.original_price=i.util.formatProductPrice(g.original_price,r),g.current_price=i.util.formatProductPrice(g.current_price,r),g.img_display=i.util.picUrl+g.img_display,g.color_img=i.util.picUrl+g.color_img,g.height=i.util.getImageHeight(),g.top=Number(i.util.getImageHeight())-50,g.href=i.util.formatProductName(p.product_name)+"-d-"+i.util.encodeMenuType(p.product_id)+"-"+i.util.encodeMenuType(g.color_id)+"-"+o+".html"+u}p.showColor=sessionStorage.img_block}t("#item_list").html(t("#productItemTempl").tmpl(e)),n()}function p(){var e=0;e=s.amount%s.pageSize==0?s.amount/s.pageSize:s.amount/s.pageSize+1,t(function(){var r={bootstrapMajorVersion:1,currentPage:s.curPage,numberOfPages:5,totalPages:e,shouldShowPage:!0,onPageClicked:function(e,a,i,o){s.curPage!==o&&(t("html").scrollTop(0),s.curPage=o,u(d),r.currentPage=o,"top_page"==e.currentTarget.id?t("#page").bootstrapPaginator(r):t("#top_page").bootstrapPaginator(r))}};t("#page").bootstrapPaginator(r),t("#top_page").bootstrapPaginator(r)})}function l(e){t("#item_list .color-wrap img").bind("click",function(r){r.stopPropagation();var a=t(this).parent().parent().parent().data().data,i=t(this).data().data,o=e[a].display_data[i];t(this).parent().parent().find("img").removeClass("selected"),t(this).addClass("selected");var n=o.href;t(this).parent().parent().parent().find("a:first").attr("href",n),t(this).parent().parent().parent().find("img:first").attr("src",o.img_display),t(this).parent().parent().parent().find(".price-wrap .goods-price").html(o.current_price),t(this).parent().parent().parent().find(".price-wrap .goods-del-price").html(o.original_price)})}console.log("list.js"),i.initLoginStatus();var g=1,s={amount:0,curPage:1,pageSize:0};setTimeout(function(){t("#sort_method").html(t("#sort_list li a:first")[0].text),t("#sort_list li a").bind("click",function(){t("#sort_method").html(t(this)[0].text),s.curPage=1,g=Number(t(this)[0].id),u(d)})},50);var d=i.util.getQueryString("keyword");t("#search_input").val(decodeURI(d)),i.setCurrencyCodeCallback(function(){u(d)})});