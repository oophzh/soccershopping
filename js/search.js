"use strict";
require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","common","bootstrapPaginator"],function(t,e,r,a,i,o){function n(){}function u(e){i.dao.searchProducts({keyWord:e,currentPage:g.curPage,orderby:s,currencyId:i.util.getLocalCurrency()},function(e){if(e.page){g.amount=e.page.amount,g.pageSize=e.page.pageSize;var r=(g.curPage-1)*g.pageSize+1,a=g.curPage*g.pageSize;a>g.amount&&(a=g.amount),t("#current_product_number").html(r+"-"+a),t("#product_total_number").html(g.amount)}else t("#current_product_number").html("0-0"),t("#product_total_number").html(0);var i=e.products;i&&i.length>0?(l(i),p(i),1==g.curPage&&c(),t("#item_list").show(),t(".empty-data").hide()):(t("#item_list").hide(),t(".empty-data").show()),t(".sort-wrap").removeClass("invisibility")})}function l(e){var r=i.util.getCurrencySymbol(i.util.getLocalCurrency()),a=i.util.getAdvSource().u;a||(a=i.util.getQueryString("u"));var o=i.util.encodeMenuType(i.util.getUvid()),u="";a&&(u="?u="+a);for(var l=0;l<e.length;l++){for(var c=e[l],p=0;p<c.display_data.length;p++){var s=c.display_data[p];s.original_price=i.util.formatProductPrice(s.original_price,r),s.current_price=i.util.formatProductPrice(s.current_price,r),s.img_display=i.util.picUrl+s.img_display,s.color_img=i.util.picUrl+s.color_img,s.height=i.util.getImageHeight(),s.top=Number(i.util.getImageHeight())-50,s.href=i.util.formatProductName(c.product_name)+"-d-"+i.util.encodeMenuType(c.product_id)+"-"+i.util.encodeMenuType(s.color_id)+"-"+o+".html"+u}c.showColor=sessionStorage.img_block}t("#item_list").html(t("#productItemTempl").tmpl(e)),t("#item_list #label1").text(t.i18n.map.Label1),t("#item_list #new_label").text(t.i18n.map.listNewLabel),n()}function c(){var e=0;e=g.amount%g.pageSize==0?g.amount/g.pageSize:g.amount/g.pageSize+1,t(function(){var r={bootstrapMajorVersion:1,currentPage:g.curPage,numberOfPages:5,totalPages:e,shouldShowPage:!0,onPageClicked:function(e,a,i,o){g.curPage!==o&&(t("html").scrollTop(0),g.curPage=o,u(d),r.currentPage=o,"top_page"==e.currentTarget.id?t("#page").bootstrapPaginator(r):t("#top_page").bootstrapPaginator(r))}};t("#page").bootstrapPaginator(r),t("#top_page").bootstrapPaginator(r)})}function p(e){t("#item_list .color-wrap img").bind("click",function(r){r.stopPropagation();var a=t(this).parent().parent().parent().data().data,i=t(this).data().data,o=e[a].display_data[i];t(this).parent().parent().find("img").removeClass("selected"),t(this).addClass("selected");var n=o.href;t(this).parent().parent().parent().find("a:first").attr("href",n),t(this).parent().parent().parent().find("img:first").attr("src",o.img_display),t(this).parent().parent().parent().find(".price-wrap .goods-price").html(o.current_price),t(this).parent().parent().parent().find(".price-wrap .goods-del-price").html(o.original_price)})}console.log("list.js"),i.initLoginStatus();var s=1,g={amount:0,curPage:1,pageSize:0};setTimeout(function(){t("#sort_method").html(t("#sort_list li a:first")[0].text),t("#sort_list li a").bind("click",function(){t("#sort_method").html(t(this)[0].text),g.curPage=1,s=Number(t(this)[0].id),u(d)})},50);var d=i.util.getQueryString("keyword");d?(t("#main_search_wrap").addClass("hide"),t("#search_input").val(decodeURI(d)),i.setCurrencyCodeCallback(function(){u(d)})):i.util.isMobile()&&(t("#main_search_wrap").removeClass("hide"),t("#main_search_input").bind("keydown",function(e){if("13"==e.keyCode){var r=t("#main_search_input").val();r&&u(r)}}),t("#main_search_btn").click(function(){var e=t("#main_search_input").val();e&&u(e)}))});