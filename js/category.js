"use strict";
require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","common","bootstrapPaginator"],function(e,t,i,n,a,r){function u(){if(a.util.menu&&a.util.menu.length>0){var t=a.util.getAdvSource().u;t||(t=a.util.getQueryString("u"));var i="";t&&(i="?u="+t);for(var n=a.util.menu.reverse(),r="<li><a id='breadcrumb_home' href='/'>"+e.i18n.map.Home+"</a></li>",u=0;u<n.length;u++){var l=n[u].menu_name+"-l-"+a.util.encodeMenuType(n[u].menu_type)+"-"+a.util.encodeMenuType(a.util.getUvid())+".html"+i;u==n.length-1?(r=r+"<li class='active'><a href='"+l+"'>"+n[u].menu_name+"</a></li>",e("#product_classify_name").html(n[u].menu_name),document.title=n[u].menu_name):r=r+"<li><a href='"+l+"'>"+n[u].menu_name+"</a></li>"}e(".breadcrumb").html(r)}}function l(){sessionStorage.menus?(clearInterval(c),m(),s()):null==c&&(c=setInterval(function(){l()},200))}function s(){var t=o();if(null!=t&&t.length>0){var i=a.util.getAdvSource().u;i||(i=a.util.getQueryString("u"));var n=a.util.encodeMenuType(a.util.getUvid()),r="";i&&(r="?u="+i);for(var u=0;u<t.length;u++){var l=t[u];l.link=a.util.formatProductName(l.menu_name)+"-l-"+a.util.encodeMenuType(l.menu_type)+"-"+n+".html"+r}e("#item_list").html(e("#categoryItemTempl").tmpl(t)),e("#item_list").show(),e(".empty-data").hide()}else e("#item_list").hide(),e(".empty-data").show();e("#list_loading").addClass("hide"),e(".loading-mask").addClass("hide"),e(".main-wrap").removeClass("invisibility"),e("footer").removeClass("invisibility")}function o(){e("#list_loading").removeClass("hide");var t=JSON.parse(sessionStorage.menus);if(t)for(var i=0;i<t.length;i++){var n=t[i];if(n.menu_type==d){for(var a=[],r=0;r<n.next_menu.length;r++){var u=n.next_menu[r];u.next_menu&&u.next_menu.length>0&&(a=a.concat(u.next_menu))}return a}for(var r=0;r<n.next_menu.length;r++){var u=n.next_menu[r];if(u.menu_type==d)return u.next_menu}}return null}function m(){if(sessionStorage.menus){var t=JSON.parse(sessionStorage.menus);if(t){e("#classify_list_wrap").html(e("#classifyListTempl").tmpl(t)),e("#classify_list_wrap a").each(function(){var t=a.util.getAdvSource().u,i=e(this).attr("href");if(i&&i.indexOf("-l-")>-1){var n=a.util.getListParams(i),r=n[n.length-2];r=a.util.encodeMenuType(r);var u=a.util.encodeMenuType(a.util.getUvid());t||(t=a.util.getQueryString("u"));var l="";t&&(l="?u="+t);var s=i.substring(0,i.indexOf("-l-"));newHref=a.util.formatProductName(s)+"-l-"+r+"-"+u+".html"+l,i=newHref,e(this).attr("href",newHref)}});for(var i=e("#classify_list_wrap span"),n=0;n<i.length;n++){i[n].id==d?e(i[n]).addClass("selected"):e(i[n]).removeClass("selected");for(var r=0;r<a.util.menu.length;r++)if(i[n].id==a.util.menu[r].menu_type){"classify_list_wrap"!==e(i[n]).parent().parent().parent().parent()[0].id&&"div"!==e(i[n]).parent().parent().parent().parent()[0].tagName.toLowerCase()&&(e(i[n]).parent().parent().parent().parent().find("ul:first").removeClass("hide"),e(i[n]).parent().parent().parent().parent().find(".icon-jiantou-xia-cuxiantiao:first").addClass("icon-jiantou-shang-cuxiantiao"),e(i[n]).parent().parent().parent().parent().find(".icon-jiantou-xia-cuxiantiao:first").removeClass("icon-jiantou-xia-cuxiantiao"));break}}e("#classify_list_wrap #arrow_icon").bind("click",function(){e(this).find("i").hasClass("icon-jiantou-xia-cuxiantiao")?(e(this).parent().parent().parent().find("ul:first").removeClass("hide"),e(this).find("i").removeClass("icon-jiantou-xia-cuxiantiao"),e(this).find("i").addClass("icon-jiantou-shang-cuxiantiao")):(e(this).parent().parent().parent().find("ul:first").addClass("hide"),e(this).find("i").addClass("icon-jiantou-xia-cuxiantiao"),e(this).find("i").removeClass("icon-jiantou-shang-cuxiantiao"))})}}else null==c&&(c=setInterval(function(){m()},200))}console.log("list.js"),a.util.getCookie("isFirst")||(a.util.setCookie("isFirst",0),e(".loading-mask").removeClass("hide")),a.initLoginStatus(),a.setLanguageCallback(function(){e("#breadcrumb_home").text(e.i18n.map.Home)});var c=null,d=a.util.getQueryString("menuType");a.util.menu=[],a.util.getClassifyNames(d,function(){u()}),function(){a.dao.getMenuAdsCnt({productType:d},function(t){t?(e(".category-adv-wrap").show(),e(".category-adv-wrap").html(t)):e(".category-adv-wrap").hide()})}(),l()});