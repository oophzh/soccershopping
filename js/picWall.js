require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","common","wall","viewer"],function(e,l,a,t,r,i,o){function c(){r.dao.listImgWall({currentPage:n.curPage,terminal:r.util.isMobile()?"2":"1",currencyId:r.util.getLocalCurrency()},function(l){if(l.page){n.amount=l.page.amount,n.pageSize=l.page.pageSize,n.curPage=l.page.curPage;var a=0;a=n.amount%n.pageSize==0?parseInt(n.amount/n.pageSize):parseInt(n.amount/n.pageSize)+1,n.totalPage=a}else n.totalPage=0,n.amount=0;0==n.amount?e("#cell_wrap").addClass("hide"):(i.setScrollEvent(),i.setDataCallback(function(){1==n.curPage?(i.getCellsHtml(u(l.imgs)),n.curPage==n.totalPage?i.setDataCallback(null):n.curPage=n.curPage+1):(e("#cell_loading").removeClass("hide"),r.dao.listImgWall({currentPage:n.curPage,terminal:r.util.isMobile()?"2":"1",currencyId:r.util.getLocalCurrency()},function(l){i.getCellsHtml(u(l.imgs)),n.curPage==n.totalPage?(e("#cell_loading").addClass("hide"),i.setDataCallback(null)):n.curPage=n.curPage+1},null,function(){i.cellHtmlComplete()}))},null,function(){i.cellHtmlComplete()}),i.setCompleteCallback(function(){e("#cells img").each(function(){e(this).click(function(){o?e("#cells").viewer("update"):o=e("#cells").viewer({url:"data-original",toolbar:{zoomIn:!1,zoomOut:!1,oneToOne:!1,reset:!1,prev:{show:!0,size:"large"},play:!1,next:{show:!0,size:"large"},rotateLeft:!1,rotateRight:!1,flipHorizontal:!1,flipVertical:!1},navbar:!1,movable:!0,title:!1,transition:!1,button:!1,hide:function(){e("#wall_buy_wrap").addClass("hide")},show:function(){e("#wall_buy_wrap").removeClass("hide")},view:function(l){var a=i.picData[l.detail.index];e("#wall_buy_btn").attr("href",a.aiHref),a.productName?(e("#wall_product_name").html(a.productName),e("#wall_product_price").html(a.curPrice),e("#wall_product_del_price").html(a.orgPrice)):(e("#wall_product_name").html(""),e("#wall_product_price").html(""),e("#wall_product_del_price").html(""))}})})})}),i.init())},null,function(){i.cellHtmlComplete()})}function u(e){for(var l=0;l<e.length;l++){var a=e[l];a.aiName=r.util.imgWallUrl+a.aiName,a&&a.aiHref?a.aiHref=a.aiHref:a.aiHref="javascript:void(0)";var t=r.util.getCurrencySymbol(r.util.getLocalCurrency());a.curPrice=r.util.formatProductPrice(a.curPrice,t),a.orgPrice=r.util.formatProductPrice(a.orgPrice,t)}return e}console.log("wall.js");var n={amount:0,curPage:1,pageSize:0,totalPage:0};!function(){c()}()});