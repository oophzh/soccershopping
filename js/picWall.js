"use strict";
require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","common","wall","viewer"],function(e,l,a,t,i,r,o){function c(){i.dao.listImgWall({currentPage:u.curPage,terminal:i.util.isMobile()?"2":"1",currencyId:i.util.getLocalCurrency()},function(l){if(l.page){u.amount=l.page.amount,u.pageSize=l.page.pageSize;var a=0;a=u.amount%u.pageSize==0?parseInt(u.amount/u.pageSize):parseInt(u.amount/u.pageSize)+1,u.totalPage=a}else u.totalPage=0,u.amount=0;0==u.amount?e("#pic_wall_list_wrap").addClass("hide"):(e("#pic_wall_list_wrap").removeClass("hide"),r.setDataCallback(function(){1==u.curPage?(r.getCellsHtml(n(l.imgs)),u.curPage==u.totalPage?(e("#more_btn").addClass("hide"),r.setDataCallback(null)):u.curPage=u.curPage+1):(e("#cell_loading").removeClass("hide"),i.dao.listImgWall({currentPage:u.curPage,terminal:i.util.isMobile()?"2":"1",currencyId:i.util.getLocalCurrency()},function(l){r.getCellsHtml(n(l.imgs)),u.curPage==u.totalPage?(e("#more_btn").addClass("hide"),r.setDataCallback(null)):u.curPage=u.curPage+1},null,function(){r.cellHtmlComplete()}))},null,function(){r.cellHtmlComplete()}),r.setCompleteCallback(function(){e("#cell_loading").addClass("hide"),e("#cells img").each(function(){e(this).click(function(){o?e("#cells").viewer("update"):o=e("#cells").viewer({url:"data-original",toolbar:{zoomIn:!1,zoomOut:!1,oneToOne:!1,reset:!1,prev:{show:!0,size:"large"},play:!1,next:{show:!0,size:"large"},rotateLeft:!1,rotateRight:!1,flipHorizontal:!1,flipVertical:!1},navbar:!1,movable:!0,title:!1,transition:!1,button:!1,hide:function(){e("#wall_buy_wrap").addClass("hide")},show:function(){e("#wall_buy_wrap").removeClass("hide")},view:function(l){var a=r.picData[l.detail.index];e("#wall_buy_btn").attr("href",a.aiHref),a.productName?(e("#wall_product_name").html(a.productName),e("#wall_product_price").html(a.curPrice),e("#wall_product_del_price").html(a.orgPrice)):(e("#wall_product_name").html(""),e("#wall_product_price").html(""),e("#wall_product_del_price").html(""))}})})})}),r.init(),e("#more_btn").click(function(){e("#cell_loading").removeClass("hide"),r.manageCells()}))},null,function(){r.cellHtmlComplete()})}function n(e){for(var l=0;l<e.length;l++){var a=e[l];a.aiName=i.util.imgWallUrl+a.aiName,a&&a.aiHref?a.aiHref=a.aiHref:a.aiHref="javascript:void(0)";var t=i.util.getCurrencySymbol(i.util.getLocalCurrency());a.curPrice=i.util.formatProductPrice(a.curPrice,t),a.orgPrice=i.util.formatProductPrice(a.orgPrice,t)}return e}console.log("wall.js");var u={amount:0,curPage:1,pageSize:0,totalPage:0};!function(){c()}()});