"use strict";
require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","common"],function(e,t,i,n,r){function a(){r.dao.getGroupInfo({productType:d},function(t){if(t&&t.length>0){var i=r.util.getAdvSource().u;i||(i=r.util.getQueryString("u"));var n="";i&&(n="?u="+i);for(var a=r.util.encodeMenuType(r.util.getUvid()),l=0;l<t.length;l++)for(var o=t[l],u=o.childMenus,s=0;s<u.length;s++){var f=u[s];f.imgPath&&(f.imgPath=r.util.picUrl+f.imgPath),f.adsImgPath&&(f.adsImgPath=r.util.picUrl+f.adsImgPath),f.href=r.util.formatProductName(f.typeDes)+"-l-"+r.util.encodeMenuType(f.productTypeId)+"-"+a+".html?parentId="+r.util.encodeMenuType(d)+n,u.length<=4?f.style="width: calc("+100/u.length+"% - 5px);":5==u.length?s<2?(f.style="width: calc(50% - 5px);",f.row="row1"):s>=2&&s<=4&&(f.style="width: calc(33.3333% - 5px);",f.row="row2"):6==u.length?(f.style="width: calc(33.3333% - 5px);",s<3?f.row="row1":s>=3&&s<6&&(f.row="row2")):7==u.length?s<3?(f.style="width: calc(33.3333% - 5px);",f.row="row1"):s>=3&&s<=6&&(f.style="width: calc(25% - 5px);",f.row="row2"):(f.style="width: calc(25% - 5px);",f.row=s<4?"row1":s>=3&&s<8?"row2":"row3")}e("#group_list").html(e("#groupItemTempl").tmpl(t));for(var h=e("#group_list .group-sub-classify-list-wrap"),l=0;l<h.length;l++){if(0==e(h[l]).find(".row1").length){var c=e(h[l]).find(".group-sub-classify-desc");if(c.length>0){for(var g=0,s=0;s<c.length;s++)c[s].offsetHeight>g&&(g=c[s].offsetHeight);c.css("height",g)}}if(e(h[l]).find(".row1").length>0){var c=e(h[l]).find(".row1 .group-sub-classify-desc");if(c.length>0){for(var g=0,s=0;s<c.length;s++)c[s].offsetHeight>g&&(g=c[s].offsetHeight);c.css("height",g)}}if(e(h[l]).find(".row2").length>0){var c=e(h[l]).find(".row2 .group-sub-classify-desc");if(c.length>0){for(var g=0,s=0;s<c.length;s++)c[s].offsetHeight>g&&(g=c[s].offsetHeight);c.css("height",g)}}if(e(h[l]).find(".row3").length>0){var c=e(h[l]).find(".row3 .group-sub-classify-desc");if(c.length>0){for(var g=0,s=0;s<c.length;s++)c[s].offsetHeight>g&&(g=c[s].offsetHeight);c.css("height",g)}}}}},null,function(){o()})}function l(){if(r.util.menu&&r.util.menu.length>0){var t=r.util.getAdvSource().u;t||(t=r.util.getQueryString("u"));var i="";t&&(i="?u="+t);for(var n=r.util.menu.reverse(),a="<li><a id='breadcrumb_home' href='/'>"+e.i18n.map.Home+"</a></li>",l=0;l<n.length;l++){var o=r.util.formatProductName(n[l].menu_name)+"-l-"+r.util.encodeMenuType(n[l].menu_type)+"-"+r.util.encodeMenuType(r.util.getUvid())+".html"+i;"1"==n[l].supportgp&&(o=r.util.formatProductName(n[l].menu_name)+"-g-"+r.util.encodeMenuType(n[l].menu_type)+"-"+r.util.encodeMenuType(r.util.getUvid())+".html"+i),l==n.length-1?(a=a+"<li class='active'><a href='"+o+"'>"+n[l].menu_name+"</a></li>",e("#product_classify_name").html(n[l].menu_name),document.title=n[l].menu_name):a=a+"<li><a href='"+o+"'>"+n[l].menu_name+"</a></li>"}e(".breadcrumb").html(a),e(".breadcrumb").removeClass("hide")}}function o(){e(".loading-mask").addClass("hide"),e(".main-wrap").removeClass("invisibility"),e("footer").removeClass("invisibility")}function u(){var t=JSON.parse(sessionStorage.menus);if(t=r.util.handleMenu(t)){e("#menu_list_wrap").html(e("#menuListTempl").tmpl(t)),e("#menu_list_wrap a").each(function(){e(this).click(function(){event.stopPropagation();var t=r.util.getAdvSource().u;t||(t=r.util.getQueryString("u"));var i="";t&&(i="?u="+t);var n=r.util.encodeMenuType(r.util.getUvid()),a=e(this).attr("href");if(a&&a.indexOf("-l-")>-1){var l=r.util.getListParams(a),o=l[l.length-2];o=r.util.encodeMenuType(o);var u=a.substring(0,a.indexOf("-l-")),s=r.util.formatProductName(u)+"-l-"+o+"-"+n+".html"+i;e(this).attr("href",s)}else if(a&&a.indexOf("-g-")>-1){var l=r.util.getListParams(a),o=l[l.length-2];o=r.util.encodeMenuType(o);var u=a.substring(0,a.indexOf("-g-")),s=r.util.formatProductName(u)+"-g-"+o+"-"+n+".html"+i;e(this).attr("href",s)}})});for(var i=r.util.menu[r.util.menu.length-1].menu_type,n=e("#menu_list_wrap span"),a=0;a<n.length;a++){n[a].id==i?e(n[a]).addClass("selected"):e(n[a]).removeClass("selected");for(var l=0;l<r.util.menu.length;l++)if(n[a].id==r.util.menu[l].menu_type){"menu_list_wrap"!==e(n[a]).parent().parent().parent()[0].id&&"div"!==e(n[a]).parent().parent().parent()[0].tagName.toLowerCase()&&(e(n[a]).parent().parent().parent().find("ul:first").css("display","block"),e(n[a]).parent().parent().parent().find(".icon-21:first").addClass("icon-jianhao"),e(n[a]).parent().parent().parent().find(".icon-21:first").removeClass("icon-21"));break}}e("#menu_list_wrap #arrow_icon").bind("click",function(){event.stopPropagation(),e(this).find("i").hasClass("icon-21")?(e(this).parent().parent().find("ul:first").slideDown(500),e(this).find("i").removeClass("icon-21"),e(this).find("i").addClass("icon-jianhao")):(e(this).parent().parent().find("ul:first").slideUp(500),e(this).find("i").addClass("icon-21"),e(this).find("i").removeClass("icon-jianhao"))})}}console.log("group.js"),r.util.getCookie("isFirst")||(r.util.setCookie("isFirst",0),e(".loading-mask").removeClass("hide")),r.initLoginStatus();var s=window.location.href,f=r.util.getListParams(s),d=r.util.decodeMenuType(f[f.length-2]);r.setLanguageCallback(function(){a(),r.util.menu=[],r.util.getClassifyNames(d,function(){document.title=r.util.menu[0].menu_name,l(),u()})})});