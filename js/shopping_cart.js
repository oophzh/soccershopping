"use strict";
require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","common","bootstrapPaginator"],function(t,i,e,r,a,o){function n(){var i=t.i18n.map.FreeShippingTitle;i&&(i=i[0].replace("$price",sessionStorage.freeShippingAmount),t("#free_shipping_tab").html(i)),sessionStorage.priceRange&&"undefined"!==sessionStorage.priceRange?(t("#free_shipping_tab").addClass("active"),t("#recently_browser_tab").removeClass("active"),t("#shipping_list_wrap").removeClass("hide"),t("#recently_browse_wrap").addClass("hide")):t("#recently_browser_tab").addClass("active")}function s(){a.dao.getCoupon({userId:a.util.getUserId(),currencyId:a.util.getLocalCurrency()},function(i){if(i){var e=[i];t("#coupon_list_wrap").html(t("#couponListTempl").tmpl(e)),t("#coupon_list_wrap #code_text").html(t.i18n.map.Code),sessionStorage.setItem("couponCode",i.cpId),t("#coupon_code_input").val(i.cpId)}})}function l(){M=!1;var i="";1==sessionStorage.applyCouponCode&&(i=a.util.getCouponCode());var e={};if(a.util.checkIsLogin())e={currencyId:a.util.getLocalCurrency(),userId:a.util.getUserId(),cart:[],applyCpNo:i};else{if(!localStorage.productList||"[]"===localStorage.productList)return t("#cart_cost_title").hide(),t("#cart_cost_wrap").hide(),t("#cart_list").hide(),t("#empty_cart").show(),t("#product_total_number").html(0),t("#cart_product_number").html("0"),t("#cart_product_number").show(),t(".loading-mask").addClass("hide"),void(t(".main-wrap").hasClass("invisibility")&&t(".main-wrap").removeClass("invisibility"));e={currencyId:a.util.getLocalCurrency(),userId:"",cart:JSON.parse(localStorage.productList),applyCpNo:i}}a.dao.shoppingCart({inputParams:JSON.stringify(e)},function(i){t(".loading-mask").addClass("hide"),i.cart&&i.cart.length>0?(t("#cart_list").show(),t("#cart_cost_title").show(),t("#cart_cost_wrap").show(),t("#empty_cart").hide(),c(i),H||(H=!0,t.getJSON("/resources/json/country.json",function(t){}))):(t("#cart_cost_title").hide(),t("#cart_cost_wrap").hide(),t("#cart_list").hide(),t("#empty_cart").show(),t("#product_total_number").html(0),t("#cart_product_number").html("0"),t("#cart_product_number").show()),t(".main-wrap").hasClass("invisibility")&&(t(".main-wrap").removeClass("invisibility"),t(".loading-mask").addClass("hide"))},function(){t(".loading-mask").addClass("hide")})}function c(i){var e=0,r=a.util.getCurrencySymbol(a.util.getLocalCurrency()),o=a.util.getAdvSource().u;o||(o=a.util.getQueryString("u"));var n="";o&&(n="?u="+o);for(var s=a.util.encodeMenuType(a.util.getUvid()),l=0;l<i.cart.length;l++){var c=i.cart[l];c.displayImg=a.util.picUrl+c.displayImg,c.cost=a.util.formatProductPrice(c.cost,r),c.unitPrice=a.util.formatProductPrice(c.unitPrice,r);var p=a.util.formatProductName(c.productName)+"-d-"+a.util.encodeMenuType(c.productId)+"-"+a.util.encodeMenuType(c.productColorId)+"-"+s+".html"+n;c.href=p,e+=Number(c.productNum)}t("#cart_list").html(t("#cartTempl").tmpl(i.cart)),t("#cart_list #color_title").html(t.i18n.map.ColorTitle),t("#cart_list #remove_label").html(t.i18n.map.Remove),t("#product_total_number").html(e),e>0?(t("#cart_product_number").html(e),t("#cart_product_number").show()):(t("#cart_product_number").html("0"),t("#cart_product_number").show());var u=3;sessionStorage.maxnum_allowed&&(u=Number(sessionStorage.maxnum_allowed)),e<=u&&t("#error_message").addClass("hide");for(var l=0;l<i.cart.length;l++)i.cart[l].productNum<=10?t("#qty_list_"+l+" option[value="+i.cart[l].productNum+"]").attr("selected","selected"):(t("#qty_list_"+l).hide(),t("#qty_list_"+l).parent().find("input").show(),t("#qty_list_"+l).parent().find("input").val(i.cart[l].productNum)),t("#"+l+" .remove-btn").each(function(){t(this).click(function(){console.log("del "+t(this).parent().parent().data().data+"item"),d(t(this).parent().parent().parent().parent().data().data,0,i)})});t(".qty-content select option[value=11]").html(t.i18n.map.MoreNumber),t(".qty-content select").change(function(){if("11"==t(this).val())t(this).hide(),t(this).parent().find("input").show();else{var e=t(this).find("option:selected").text();d(t(this).parent().parent().data().data,e,i)}}),t(".qty-content input").blur(function(){var e=t(this).val();d(t(this).parent().parent().data().data,e,i)});for(var l=0;l<i.dis_info.length;l++){var m=i.dis_info[l];m.disAmount<0?m.disAmount="-"+a.util.formatProductPrice(-m.disAmount,r):m.disAmount="+"+a.util.formatProductPrice(m.disAmount,r),8==m.policyId&&(M=!0)}if(t("#dis_info_list").html(t("#disInfoTempl").tmpl(i.dis_info)),t("#shipping_cost_list").html(t("#shippingCostTempl").tmpl(i.dis_info)),M?(t("#apply_btn").text(t.i18n.map.Cancel),t("#apply_btn").css("background","#333")):(t("#apply_btn").text(t.i18n.map.Apply),t("#apply_btn").css("background","#00aa00")),i.reachFreeShipping&&1==i.reachFreeShipping)t("#free_tip").css("color","#fff"),t("#free_tip").html(i.freeShippingInfo);else{t("#free_tip").css("color","#fff");var _=t.i18n.map.FreeShippingTip;if(_&&(_=_.replace("$price","<span style='color: #ea5455;'>"+i.freeShippingInfo+"</span>"),_=_+"<span id='free_tip_add_more' class='free-tip-add-more'>"+t.i18n.map.AddFreeShipping+"</span>"),t("#free_tip").html(_),t("#free_tip_add_more").click(function(){t("#free_shipping_tab").addClass("active"),t("#recently_browser_tab").removeClass("active"),t("#shipping_list_wrap").removeClass("hide"),t("#recently_browse_wrap").addClass("hide"),window.scrollTo(0,t("#free_shipping_tab").offset().top-150)}),sessionStorage.priceRange&&"undefined"!==sessionStorage.priceRange){var g=JSON.parse(sessionStorage.priceRange);g&&g.length>0&&t("#free_tip_add_more").css("display","inline-block")}else t("#free_tip_add_more").css("display","none")}t("#sub_total").html(a.util.formatProductPrice(i.amount,r)),t("#total").html(a.util.formatProductPrice(i.amountNoShipping,r)),t("#grand_total").html(a.util.formatProductPrice(i.realAmount,r)),i.cpPromptInfo&&t("#coupon_use_info").html(i.cpPromptInfo),A=i.realAmount,z=i.amountAllowed}function d(i,e,r){if(console.log("changeProductNumber"),a.util.checkIsLogin()){var o=r.cart[i];o.productNum=Number(e),o.userId=a.util.getUserId(),t(".loading-mask").removeClass("hide"),a.dao.shoppingCartMt({inputParams:JSON.stringify([o])},function(t){l()})}else if(localStorage.productList){t(".loading-mask").removeClass("hide");var n=JSON.parse(localStorage.productList);if(0==Number(e))n.splice(i,1);else{var o=n[i];o.productNum=Number(e)}localStorage.setItem("productList",JSON.stringify(n)),l()}}function p(){var i=[];localStorage.currentBrowseList&&(i=JSON.parse(localStorage.currentBrowseList));var e={currencyId:a.util.getLocalCurrency(),products:i};a.dao.productsViewed({inputParams:JSON.stringify(e)},function(i){if(i&&i.length>0){i.length>10&&(i=i.slice(0,10));var e=a.util.getCurrencySymbol(a.util.getLocalCurrency()),r=a.util.getAdvSource().u;r||(r=a.util.getQueryString("u"));var o="";r&&(o="?u="+r);for(var n=a.util.encodeMenuType(a.util.getUvid()),s=0;s<i.length;s++){var l=i[s];l.orgPrice=a.util.formatProductPrice(l.orgPrice,e),l.curPrice=a.util.formatProductPrice(l.curPrice,e),l.imgDisplay=a.util.picUrl+l.imgDisplay,l.height=a.util.getCartImageHeight();var c=a.util.formatProductName(l.productName)+"-d-"+a.util.encodeMenuType(l.productId)+"-"+a.util.encodeMenuType(l.productColorId)+"-"+n+".html"+o;l.href=c}t("#product_viewed_list_wrap").html(t("#productViewedListTempl").tmpl(i)),t("#recently_browse_wrap").find(".free-shpping-empty-data").addClass("hide")}else t("#recently_browse_wrap").find(".free-shpping-empty-data").removeClass("hide")})}function u(){if(sessionStorage.priceRange&&"undefined"!==sessionStorage.priceRange){var i=JSON.parse(sessionStorage.priceRange);i&&i.length>0&&(t("#price_zone_list").html(t("#priceZoneTempl").tmpl(i)),t(t("#price_zone_list").find("li")[j]).addClass("current"),t("#price_zone_list li").each(function(){t(this).click(function(){j=t(this)[0].id,t("#price_zone_list").find("li").removeClass("current"),t(this).addClass("current"),F.curPage=1,m(i[j].from,i[j].to)})}),t("#price_zone_list").find("li").removeClass("current"),t(t("#price_zone_list").find("li")[j]).addClass("current"),m(i[j].from,i[j].to))}else t("#free_shipping_tab").addClass("hide"),t("#shipping_list_wrap").addClass("hide"),t("#recently_browse_wrap").removeClass("hide")}function m(i,e){t("#shipping_list_wrap .shipping-list-loading-data").removeClass("hide"),a.dao.productsByPriceRange({currencyId:a.util.getLocalCurrency(),currentPage:F.curPage,from:i,to:e},function(i){i.page&&(F.amount=i.page.amount,F.pageSize=i.page.pageSize);var e=i.products;if(e&&e.length>0){for(var r=a.util.getCurrencySymbol(a.util.getLocalCurrency()),o=0;o<e.length;o++){var n=e[o];n.original_price=a.util.formatProductPrice(n.original_price,r),n.current_price=a.util.formatProductPrice(n.current_price,r),n.img_display=a.util.picUrl+n.img_display,n.height=a.util.getCartImageHeight()}t("#shipping_list").html(t("#shippingListTempl").tmpl(e)),t(".free-shipping-item").each(function(){t(this).click(function(){g(t(this)[0].id)})}),1==F.curPage&&_(),t("#shipping_list_wrap").find(".free-shpping-empty-data").addClass("hide"),t("#shipping_list_wrap").find("#page_wrap").removeClass("hide"),t("#shipping_list_wrap").find("#shipping_list").removeClass("hide"),t("#shipping_list_wrap .shipping-list-loading-data").addClass("hide")}else t("#shipping_list_wrap").find(".free-shpping-empty-data").removeClass("hide"),t("#shipping_list_wrap").find("#page_wrap").addClass("hide"),t("#shipping_list_wrap").find("#shipping_list").addClass("hide"),t("#shipping_list_wrap .shipping-list-loading-data").addClass("hide")},function(){t("#shipping_list_wrap").find(".free-shpping-empty-data").removeClass("hide"),t("#shipping_list_wrap").find("#page_wrap").addClass("hide"),t("#shipping_list_wrap").find("#shipping_list").addClass("hide"),t("#shipping_list_wrap .shipping-list-loading-data").addClass("hide")})}function _(){var i=0;i=F.amount%F.pageSize==0?F.amount/F.pageSize:F.amount/F.pageSize+1,t(function(){var e={bootstrapMajorVersion:1,currentPage:F.curPage,numberOfPages:5,totalPages:i,shouldShowPage:!0,onPageClicked:function(i,r,a,o){F.curPage=o;var n=JSON.parse(sessionStorage.priceRange);m(n[j].from,n[j].to),e.currentPage=o,t("#page").bootstrapPaginator(e)}};t("#page").bootstrapPaginator(e)})}function g(i){a.dao.productDetail({productId:i,currencyId:a.util.getLocalCurrency()},function(i){if(i.product_id){q.productId=i.product_id;for(var e=a.util.getCurrencySymbol(a.util.getLocalCurrency()),r=0;r<i.color_data.length;r++){var o=i.color_data[r];o.original_price=a.util.formatProductPrice(o.original_price,e),o.current_price=a.util.formatProductPrice(o.current_price,e),o.img_display=a.util.picUrl+o.img_display,o.color_img=a.util.picUrl+o.color_img,o.width=200,o.height=200;for(var n=0;n<o.img_groups.length;n++){var s=o.img_groups[n];s.small_img=a.util.picUrl+s.small_img,s.big_img=a.util.picUrl+s.big_img}}i.product_des?t(".description").html(i.product_des):t(".description").parent().parent().hide(),t("#name").html(i.color_data[J].pcName),t("#product_ext_name").html(i.color_data[J].pcNameExt),t("#current_price").html(i.color_data[J].current_price),t("#original_price").html(i.color_data[J].original_price),h(i.color_data),f(i.color_data[J].dyn_attrs),L(),x(i.color_data[J].img_groups),t("#product_detail_mask").removeClass("hide"),t("#product_detail_mask #close_btn").click(function(){t("#product_detail_mask").addClass("hide")})}})}function h(i){1==i.length?q.productColorId=i[0].color_id:(t("#color_data_wrap").removeClass("hide"),t("#color_list").html(t("#colorItem").tmpl(i)),t(t("#color_list li")[J]).find("span").css("display","block"),t(t("#color_list li")[J]).find("img").addClass("selected-image-border"),t("#color_desc").html(i[J].color_des),q.productColorId=i[J].color_id,t("#color_list li").bind("click",function(){if("none"==t(this).find("span").css("display")){t("#color_list li").find("span").css("display","none"),t("#color_list li").find("img").removeClass("selected-image-border"),t(this).find("span").css("display","block"),t(this).find("img").addClass("selected-image-border");var e=t(this).data().data;t("#color_desc").html(i[e].color_des),t("#name").html(i[e].pcName),t("#product_ext_name").html(i[e].pcNameExt),t("#current_price").html(i[e].current_price),t("#original_price").html(i[e].original_price),q.productColorId=i[e].color_id,x(i[e].img_groups)}}))}function f(i){B=!1,D=[],U=[],t("#customBtn").addClass("hide"),t("#dyn_attrs_list").html(t("#dynAttrsItem").tmpl(i)),t("#attr_name_hint").html(t.i18n.map.PrintNameHint),t("#attr_number_hint").html(t.i18n.map.PrintNumberHint),t("#dyn_attrs_list option[value=11]").html(t.i18n.map.MoreNumber);for(var e=a.util.getCurrencySymbol(a.util.getLocalCurrency()),r=0;r<i.length;r++){var o=i[r];if(o.domain_list&&o.domain_list.length>0&&(t("#"+o.attr_name+"_content").html(o.domain_list[0]),o.selectedAttr=o.domain_list[0].optId,"Size"==o.attr_name)){t("#size_guide").html(t.i18n.map.SizeGuide);for(var n=0;n<o.domain_list.length;n++){var s=o.domain_list[n];s.attrType=o.attrID,U.push(s)}}o.input_cmp&&(D.push(o),B=!0,t("#customBtn").removeClass("hide")),"3"==o.attrID&&t("#print_number_price").html("+"+a.util.formatProductPrice(o.input_cmp.price,e)),"4"==o.attrID&&t("#print_name_price").html("+"+a.util.formatProductPrice(o.input_cmp.price,e))}C(),t("#dyn_attrs_list select").change(function(){console.log("#dyn_attrs_list select value = "+t(this).val()),"11"==t(this).val()?(t(this).hide(),t(this).parent().find("input").show()):(t("#custom_"+t(this)[0].id+" option[value="+t(this).val()+"]").prop("selected","selected"),v())}),t("#dyn_attrs_list input").blur(function(){var i=t(this).val();if(i<=10){var e=t(this).parent().find("select")[0].id;t("#custom_"+e+" option[value="+i+"]").prop("selected","selected")}else{var e=t(this).parent().find("select")[0].id,r="#"+e;t(r).hide(),t(r).parent().find("input").show(),t(r).parent().find("input").val(i)}v()}),t("#size_guide").click(function(){t("#size_guide_mask").removeClass("hide"),t("body").css("overflow","hidden")}),t("#size_guide_mask #close_btn").click(function(){t("#size_guide_mask").addClass("hide"),t("body").css("overflow","auto")})}function v(){R=b(),t("#custome_attr_list").html(""),t("#custome_attr_list").html(t("#customAttrItem").tmpl(R))}function C(){U&&U.length>0&&(t("#size_list").html(t("#customSizeItem").tmpl(U)),t("#size_list select option[value=11]").html(t.i18n.map.MoreNumber),v(),t("#size_list select").change(function(){console.log("#size_list select value = "+t(this).val()),t("#"+t(this)[0].id.substring(t(this)[0].id.indexOf("_")+1)+" option[value="+t(this).val()+"]").prop("selected","selected"),"11"==t(this).val()?(t(this).hide(),t(this).parent().find("input").show()):v()}),t("#size_list input").blur(function(){var i=t(this).val();if(i<=10){var e=t(this).parent().find("select")[0].id;t("#"+e.substring(e.indexOf("_")+1)+" option[value="+i+"]").prop("selected","selected")}else{var e=t(this).parent().find("select")[0].id,r="#"+e.substring(e.indexOf("_")+1);t(r).hide(),t(r).parent().find("input").show(),t(r).parent().find("input").val(i)}v()})),O()}function y(){C(),t("#custom_wrap_mask").removeClass("hide"),t("body").css("overflow","hidden")}function b(){for(var i=[],e=0;e<U.length;e++){var r=U[e],a=t("#"+r.optId+"_number_list").val();if("11"==a&&((a=t("#"+r.optId+"_number_list").parent().find("input").val())||(a=0)),r.number=a,Number(a)<=10?t("#custom_"+r.optId+"_number_list option[value="+a+"]").prop("selected","selected"):(t("#custom_"+r.optId+"_number_list").hide(),t("#custom_"+r.optId+"_number_list").parent().find("input").show(),t("#custom_"+r.optId+"_number_list").parent().find("input").val(a)),r.customs=[],a>0){for(var o=0;o<a;o++){for(var n=0;n<D.length;n++){D[n].position=o;var s=t("#print_input_"+r.optId+"_"+D[n].attrID+"_"+D[n].position).val();D[n].custominfo=s}r.customs.push(JSON.parse(JSON.stringify({attrs:D})))}i.push(r)}}return i}function w(){t("#custom_wrap_mask").addClass("hide"),t("body").css("overflow","auto")}function I(){var t=null;if(null==(t=B?k():getProductListForNormal())||0==t.length)return void w();a.util.checkIsLogin()?S(t):P(t)}function S(t){a.dao.merge2cart({inputParams:JSON.stringify(t)},function(){window.location.href="../../../shopping_cart.html",w()},function(t){w(),alert(t.msg)})}function P(i){var e=localStorage.productList;if(e=e?JSON.parse(e):[],0==e.length)e=i;else for(var r=0;r<i.length;r++){for(var a=i[r],o=!1,n=JSON.stringify(a.attrOpts),s=0;s<e.length;s++){var l=e[s];n==JSON.stringify(l.attrOpts)&&(l.productNum=l.productNum+a.productNum,o=!0)}o||e.push(a)}localStorage.productList=JSON.stringify(e);for(var c=0,s=0;s<e.length;s++)c=parseInt(c)+parseInt(e[s].productNum);t("#cart_product_number").html(c),t("#cart_product_number").show(),window.location.href="../../../shopping_cart.html",w()}function N(t){for(var i=0;i<t.length;i++)for(var e=t[i],r=JSON.stringify(e.attrOpts),a=i+1;a<t.length;a++){var o=t[a];r==JSON.stringify(o.attrOpts)&&(e.productNum=e.productNum+o.productNum,t.splice(a,1),a-=1)}return t}function k(){var i=[],e={userId:a.util.getUserId(),productId:q.productId,productColorId:q.productColorId,productNum:1,attrOpts:[{attrType:"",attrOptId:"",custominfo:""}]};if(R&&R.length>0)for(var r=0;r<R.length;r++)for(var o=R[r],n=0;n<o.customs.length;n++){for(var s=[{attrType:o.attrType,attrOptId:o.optId}],l=o.customs[n].attrs,c=0;c<l.length;c++){var d=l[c],p=t("#print_input_"+o.optId+"_"+d.attrID+"_"+d.position).val();s.push({attrType:d.attrID,attrOptId:d.input_cmp.optId,custominfo:p})}e.attrOpts=s,i.push(JSON.parse(JSON.stringify(e)))}return console.log(i),N(i)}function O(){t("#custom_confirm_btn").unbind("click").click(function(){I()}),t("#custom_wrap_mask #close_btn, #custom_wrap_mask #custom_cancel_btn").unbind("click").click(function(){w()})}function L(){t("#qty_list option[value='1']").prop("selected","selected");var i=t("#qty_list").find("option:selected").val();q.productNum=Number(i),t("#qty_list").on("change",function(){var i=t(this).find("option:selected").text();q.productNum=Number(i)})}function x(i){t("#small_image_list").length>0&&t("#small_image_list").html(t("#productSmallImage").tmpl(i)),t("#small_image_list li:first").attr("id","onlickImg"),t("#vertical img:first").attr("src",i[0].big_img),-1==E.indexOf(i[0].big_img)&&t("#imageLoading").removeClass("hide"),T()}function T(){var i=null;t(document).ready(function(){t("#imageMenu li img").bind("click",function(){"onlickImg"!=t(this).attr("id")&&(t("#midimg").attr("src",t(this).data().data),-1==E.indexOf(t(this).data().data)&&t("#imageLoading").removeClass("hide"),t("#imageMenu li").removeAttr("id"),t(this).parent().attr("id","onlickImg"))}).bind("mouseover",function(){"onlickImg"!=t(this).attr("id")&&(window.clearTimeout(i),t("#midimg").attr("src",t(this).data().data),-1==E.indexOf(t(this).data().data)&&t("#imageLoading").removeClass("hide"))}).bind("mouseout",function(){"onlickImg"!=t(this).attr("id")&&(t("#midimg").attr("src",t(this).data().data),-1==E.indexOf(t(this).data().data)&&t("#imageLoading").removeClass("hide"),t(this).removeAttr("style"),i=window.setTimeout(function(){t("#midimg").attr("src",t("#onlickImg img").data().data),-1==E.indexOf(t("#onlickImg img").data().data)&&t("#imageLoading").removeClass("hide")},1e3))})})}console.log("cart.js");var z="",A="",M=!1,J=0,q={productId:"",productColorId:""},E=[],U=[],R=[],D=[],B=!1,j=0,F={amount:0,curPage:1,pageSize:8},H=!1;!function(){t("#continue_shopping_btn").click(function(){window.location.href="/"}),t("#checkout_btn").click(function(){var i=Number(t("#product_total_number").text()),e=3;if(sessionStorage.maxnum_allowed&&(e=Number(sessionStorage.maxnum_allowed)),i>e)t("#error_message").html(t.i18n.map.maxErrorMsg1+" "+e+t.i18n.map.maxErrorMsg2),t("#error_message").removeClass("hide"),setTimeout(function(){alert(t.i18n.map.maxErrorMsg1+" "+e+t.i18n.map.maxErrorMsg2)},1);else if(A>z){var r=a.util.getCurrencySymbol(a.util.getLocalCurrency());t("#error_message").html(t.i18n.map.maxAmountErrorMsg1+" "+a.util.formatProductPrice(A,r)+" "+t.i18n.map.maxAmountErrorMsg2+" "+a.util.formatProductPrice(z,r)+". "+t.i18n.map.maxAmountErrorMsg3),t("#error_message").removeClass("hide"),setTimeout(function(){alert(t.i18n.map.maxAmountErrorMsg1+" "+a.util.formatProductPrice(A,r)+" "+t.i18n.map.maxAmountErrorMsg2+" "+a.util.formatProductPrice(z,r)+". "+t.i18n.map.maxAmountErrorMsg3)},1)}else t("#error_message").addClass("hide"),a.util.checkIsLogin()?window.location.href="../../../checkout_shipping.html":window.location.href="../../../login.html"}),t("#apply_btn").click(function(){M?(sessionStorage.setItem("applyCouponCode",0),t("#coupon_use_info").html(""),l()):t("#coupon_code_input").val()&&a.util.getCouponCode()&&(a.util.getCouponCode()===t("#coupon_code_input").val()?(sessionStorage.setItem("applyCouponCode",1),t(".loading-mask").removeClass("hide")):(sessionStorage.setItem("applyCouponCode",0),t("#coupon_use_info").html(t.i18n.map.ErrorCouponCode)),l())}),t("#free_shipping_tab").click(function(){t("#free_shipping_tab").addClass("active"),t("#recently_browser_tab").removeClass("active"),t("#shipping_list_wrap").removeClass("hide"),t("#recently_browse_wrap").addClass("hide")}),t("#recently_browser_tab").click(function(){t("#recently_browser_tab").addClass("active"),t("#free_shipping_tab").removeClass("active"),t("#shipping_list_wrap").addClass("hide"),t("#recently_browse_wrap").removeClass("hide")}),t("#midimg").load(function(i){console.log("big image loading"),t("#imageLoading").addClass("hide"),E.push(i.currentTarget.currentSrc)}),t("#addCartBtn").unbind("click").click(function(){console.log("addCartBtn"),I()}),t("#customBtn").click(function(){y()})}(),a.setLanguageCallback(function(){n(),l()}),a.setCurrencyCodeCallback(function(){n(),l(),p(),u(),s()}),a.initLoginStatus(function(i){a.util.getLocalCurrency()&&(l(),p(),u()),i?(t("#coupon_hint_wrap").addClass("hide"),t("#coupon_hint_wrap").attr("href","javascript:void(0)"),s()):(t("#coupon_hint_wrap").removeClass("hide"),t("#coupon_hint_wrap").attr("href","login.html"))})});