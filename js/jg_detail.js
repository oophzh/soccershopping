require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","common","star","wall","front"],function(e,t,i,r,a,o,l,c){function s(){a.dao.productDetail({productId:d,currencyId:a.util.getLocalCurrency(),userId:a.util.getUserId()},function(t){if(t.product_id){currentProduct=t;for(var i=t,r=a.util.getCurrencySymbol(a.util.getLocalCurrency()),o=0;o<i.color_data.length;o++){var l=i.color_data[o];l.original_price=a.util.formatProductPrice(l.original_price,r),l.current_price=a.util.formatProductPrice(l.current_price,r),l.img_display=a.util.picUrl+l.img_display,l.color_img=a.util.picUrl+l.color_img;for(var c=0;c<l.img_groups.length;c++){var s=l.img_groups[c];s.small_img=a.util.picUrl+s.small_img,s.big_img="/pic/"+s.big_img}}e("#product_main_image").attr("src",i.color_data[0].img_groups[0].big_img);var m=i.color_data[0].img_groups.slice(1,i.color_data[0].img_groups.length);e("#imageTempl").tmpl(m).appendTo("#product_image_list"),e("#product_name").html(i.color_data[0].pcName),e("#product_ext_name").html(i.color_data[0].pcNameExt),e("#current_price").html(i.color_data[0].current_price),"-0"==i.color_data[0].disCount||i.color_data[0].disCount.indexOf("--")>-1?e("#original_price").addClass("hide"):(e("#original_price").html(i.color_data[0].original_price),e("#original_price").removeClass("hide")),i.product_des&&(e("#desc_wrap").removeClass("hide"),e(".description").html(i.product_des))}})}function m(){a.dao.getCommentsByPrd({currentPage:u.curPage,productId:d,userId:a.util.getUserId()},function(t){if(!t)return void e("#comment_list_wrap").addClass("hide");if(t.page&&(u.amount=t.page.amount,u.pageSize=t.page.pageSize),t&&t.comments.length>0){for(var i=t.comments,r=0;r<i.length;r++){var o=i[r];o.crtime=a.util.formatOrderDateTime(o.crtime),o.usrico&&(o.usrImage=a.util.userIconUrl+o.usrico,o.usrErrorImage='javascript:this.src="resources/img/user/'+o.usrico+'";');for(var l=0;l<o.zps.length;l++){var c=o.zps[l];c.crtime=a.util.formatOrderDateTime(c.crtime);for(var s=0;s<c.shareimgs.length;s++)c.shareimgs[s]=a.util.commentPicUrl+c.shareimgs[s]}for(var l=0;l<o.shareimgs.length;l++)o.shareimgs[l]=a.util.commentPicUrl+o.shareimgs[l]}e("#comment_list").html(e("#commentItemTempl").tmpl(i)),e("#comment_list #color_title").html(e.i18n.map.ColorTitle),e("#comment_list .reply-text").html(e.i18n.map.DetailCommentReply),e("#comment_list img.lazy").lazyload({effect:"fadeIn"}),e(".empty-data").addClass("hide"),e("#comment_list .comment-item-wrap input").each(function(){e(this).rating({step:1,size:"xs",showClear:!1,min:0,max:5,disabled:!0,showCaption:!1}).rating("showStars",e(this).data().data)}),e("#comment_list .image-wrap img").each(function(){e(this).click(function(){e(this).parent().find("img").removeClass("selected"),e(this).addClass("selected"),n(e(this).parent())})}),e("#comment_list .top-wrap").each(function(){e(this).click(function(){var t=e(this).data().data;if(t){e("#iframe_loading").removeClass("hide"),e("#video").addClass("hide"),e("#video").attr("src",t);document.getElementById("video").onload=function(){e("#iframe_loading").addClass("hide"),e("#video").removeClass("hide")}}e("#video_mask").removeClass("hide"),e("#video_mask #close_video_btn").click(function(){e("#video").attr("src",""),e("#video_mask").addClass("hide")})})}),e("#comment_list_wrap").removeClass("hide")}else e("#comment_list_wrap").addClass("hide")})}function n(e){commentViewer=e.viewer({url:"data-original",toolbar:{zoomIn:!1,zoomOut:!1,oneToOne:!1,reset:!1,prev:{show:!0,size:"large"},play:!1,next:{show:!0,size:"large"},rotateLeft:!1,rotateRight:!1,flipHorizontal:!1,flipVertical:!1},navbar:!1,movable:!0,title:!1,transition:!1,button:!1,hide:function(){e.find("img").removeClass("selected")}})}console.log("jg_detail.js");var d=a.util.getQueryString("i"),u=(a.util.getQueryString("c"),{amount:0,curPage:1,pageSize:0});a.setCurrencyCodeCallback(function(){s(),m()}),e(document).ready(function(){e("footer").addClass("hide")})});